session_name: dcist_launch

options:
    default-command: /bin/zsh

environment:
    CONF_NAME: default
    ROBOT_TYPE: spot
    ROBOT_NAME: spot

windows:

    - window_name: talker
      shell_command_before: source ${DCIST_WS}/install/setup.zsh
      layout: tiled
      panes:
        - ros2 launch dcist_launch_system master.launch.yaml conf_name:=default robot_name:=$ROBOT_NAME robot_type:=$ROBOT_TYPE launch_example_1_node:=true
        - ros2 launch dcist_launch_system master.launch.yaml conf_name:=default robot_name:=$ROBOT_NAME robot_type:=$ROBOT_TYPE launch_example_2_node:=true
        - ros2 launch dcist_launch_system master.launch.yaml conf_name:=default robot_name:=$ROBOT_NAME robot_type:=$ROBOT_TYPE launch_nominal_node:=true launch_warning_node:=true

    - window_name: hydra
      shell_command_before: source ${DCIST_WS}/install/setup.zsh
      layout: tiled
      panes:
        - ros2 launch dcist_launch_system master.launch.yaml conf_name:=default robot_name:=$ROBOT_NAME robot_type:=$ROBOT_TYPE launch_hydra:=true
        - ros2 launch dcist_launch_system master.launch.yaml conf_name:=default robot_name:=$ROBOT_NAME robot_type:=$ROBOT_TYPE launch_hydra_visualizer:=true

    - window_name: roman
      shell_command_before: 
      - source ${DCIST_WS}/install/setup.zsh
      - source ${DCIST_ENV}/roman/bin/activate
      layout: tiled
      panes:
        - ros2 launch dcist_launch_system master.launch.yaml conf_name:=default robot_name:=$ROBOT_NAME robot_type:=$ROBOT_TYPE camera:=frontleft launch_fastsam:=true
        - ros2 launch dcist_launch_system master.launch.yaml conf_name:=default robot_name:=$ROBOT_NAME robot_type:=$ROBOT_TYPE camera:=frontleft launch_roman_map:=true

    - window_name: robot
      shell_command_before: source ${DCIST_WS}/install/setup.zsh
      layout: tiled
      panes:
        - ros2 launch dcist_launch_system master.launch.yaml conf_name:=default robot_name:=$ROBOT_NAME robot_type:=$ROBOT_TYPE launch_spot_executor:=true
        - ros2 launch dcist_launch_system master.launch.yaml conf_name:=default robot_name:=$ROBOT_NAME robot_type:=$ROBOT_TYPE launch_spot_state_publisher:=true
        - ros2 run teleop_twist_keyboard teleop_twist_keyboard --ros-args -r /cmd_vel:=/spot_executor_node/cmd_vel

    - window_name: misc
      shell_command_before: source ${DCIST_WS}/install/setup.zsh
      layout: tiled
      panes:
        - ros2 launch dcist_launch_system master.launch.yaml conf_name:=default robot_name:=$ROBOT_NAME robot_type:=$ROBOT_TYPE launch_rviz:=true

    - window_name: debug
      shell_command_before: source ${DCIST_WS}/install/setup.zsh
      layout: tiled
      panes:
        - ros2 run ros_system_monitor ros_system_monitor
            --param_file `ros2 pkg prefix dcist_launch_system`/share/dcist_launch_system/config/default/ros_system_monitor_config.yaml
            --ros-args -r /ros_system_monitor/example1_node_topic:=/example_1_node/topic
