---
launch:
  - arg: {name: verbosity, default: '0'}
  - arg: {name: use_sim_time}
  - arg: {name: conf_name}
  # hydra-multi
  - set_remap: {from: ~/external_loop_closures, to: /spot/roman/roman_lc/pose_graph_update}
  - node:
      pkg: hydra_multi_ros
      exec: hydra_multi_ros_node
      name: hydra_multi
      param:
        - {name: use_sim_time, value: $(var use_sim_time)}
      args: >
        --config-utilities-yaml
          {
            robots: [
            {
              type: UnitInterface,
              robot_id: 0,
              inputs: {
                dgraph: {
                  type: FileDGraphInput, dgrf_path: $(env ADT4_PRIOR_DGRF_PATH), include_priors: true
                },
                dsg: {
                  type: FileDsgInput, dsg_json: $(env ADT4_PRIOR_DSG_PATH)
                }
              }
            }
          ]
        }
        --config-utilities-file $(find-pkg-share dcist_launch_system)/config/$(var conf_name)/hydra_multi.yaml
        --config-utilities-yaml {glog_level: 0, glog_verbosity: $(var verbosity)}
        --config-utilities-yaml {log_path: $(env HOME)/.hydra_multi/adt4}
